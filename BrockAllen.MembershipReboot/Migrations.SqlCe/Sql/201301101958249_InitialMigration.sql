CREATE TABLE [UserAccounts] (
    [ID] [int] NOT NULL IDENTITY,
    [Tenant] [nvarchar](50) NOT NULL,
    [Username] [nvarchar](100) NOT NULL,
    [Email] [nvarchar](100) NOT NULL,
    [Created] [datetime] NOT NULL,
    [PasswordChanged] [datetime] NOT NULL,
    [IsAccountVerified] [bit] NOT NULL,
    [IsLoginAllowed] [bit] NOT NULL,
    [IsAccountClosed] [bit] NOT NULL,
    [LastLogin] [datetime],
    [LastFailedLogin] [datetime],
    [FailedLoginCount] [int] NOT NULL,
    [VerificationKey] [nvarchar](50),
    [VerificationKeySent] [datetime],
    [HashedPassword] [nvarchar](200) NOT NULL,
    CONSTRAINT [PK_dbo.UserAccounts] PRIMARY KEY ([ID])
)
CREATE UNIQUE INDEX [IX_Tenant_Username] ON [UserAccounts]([Tenant], [Username])
CREATE INDEX [IX_VerificationKey] ON [UserAccounts]([VerificationKey])
CREATE TABLE [UserClaims] (
    [UserAccountID] [int] NOT NULL,
    [Type] [nvarchar](150) NOT NULL,
    [Value] [nvarchar](150) NOT NULL,
    CONSTRAINT [PK_dbo.UserClaims] PRIMARY KEY ([UserAccountID], [Type], [Value])
)
CREATE INDEX [IX_UserAccountID] ON [UserClaims]([UserAccountID])
ALTER TABLE [UserClaims] ADD CONSTRAINT [FK_dbo.UserClaims_dbo.UserAccounts_UserAccountID] FOREIGN KEY ([UserAccountID]) REFERENCES [UserAccounts] ([ID]) ON DELETE CASCADE
CREATE TABLE [__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [Model] [image] NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId])
)
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201301101958249_InitialMigration', 0x1F8B0800000000000400ED5ADD6EDB3614BE1FB077107439A0569276C056382D5227D982354911A5BD2D68E9D8264A919A48A7C9B3ED628FB457D8A1FE2C91942CCB4EB701BBB3F9F39D1F1E1E9EF3D97FFDF1E7F4ED63C2BC07C82415FCD43F9E1CF91EF048C4942F4FFDB55ABCF8C97FFBE6FBEFA61771F2E87DAAD6BDD4EB702797A7FE4AA9F47510C868050991938446999062A126914802128BE0E4E8E8E7E0F8380084F011CBF3A6776BAE6802F917FC3A133C8254AD09BB163130598EE34C98A37A3724019992084EFD779988BE9C31067C720DC91C355AD1F40EE64228DF3B6394A04A21B085EFA5AF5E7F9410AA4CF06598124509BB7F4A01E7178449280D789DBE1A6AC3D189B621209C0B8570828FF2815F5B87F65DA01FD493562BB7F1D4478DB3B32812E8A0E6425CFA1B3CB50670E8432652C8D4D31D2CCAED57E7BE17B4F705E6C67A5B638FD6003F71F5F2C4F76ED68C913983DA51E8C950890C7E010E1951107F204A4186817015436E8125D590710F9CA045A51C3C138C2FDFBBA48F10BF07BE54AB5AD63579AC467EC420FBC8294623EE51D91A1CAAF58BD5DEE4F86947C1C7477B4BBE480865DF5EEC2C037D3E95E073FC724F93DD713E1029BF8A2C9EAD085F1E00EF4A96418D29842EE806F19D100C081F01F85E2C29C74420BE1E02AD546FC684DC1FEE3D912A57AFCF6FC5F96E07BAC440C2A839045C036A9667982DF7BE1FAD38CA28CF8498630E79B9871863880F6163CF58FFFC4AE44A27B722F67734E864C4EDBD210F74995B60DE634668227DEF0E583EAD1FB9E25D9BE89C964F7FD69F50AD4C24778295D96E33F3F99E644BD03E11CEE950ACB3C850691A6C1EA4ADCF548E35E6916ABC71F67BE5DCA1250F5AF88930C7316F7D020D8DF6B91585AABBE5FDFD1FBAD2EE6717DB19B0452CEE13AE553C76846B15CD43C2F54C4A11D15C13335E0B2DDA465DF0D8EB57A9706BCB1C74E59A299A321AA106A7FE0F96AF3A61EB8BD986ADCA3E03F8D837C3FE969F030305DE59A4F2727C4664446247DCA30AED11BC2990E9928D302CBAA5CA08E5CABE5694473425AC577D63D7C072546B55E39B33E79002D71565EF710C11BC2DC504B528C363DB1C340D1AC165A748DCA3700764551978693629F83691399160C5A0DE1E826A1880F97F13DFAE40B102CEC6A81E12275019C8064CC3400756798D1B8BDC17DDF4F8D64B566BDF56DC3ABAADD7CA00B2305A4788CB1C09A53EC64D271A14AD68D5B2061D3DEBF49AA42966DF460F5B8E7861D1C0CE5E84BBF78D49811144D2D13ED6DAD692B059234B306651346A7A4933B909426F1627D6B2DD83B612DC8C5DFBDCAA08AC56EBCFC58E9EA6BE15F1F6D52FB12ED1DE44278EBC4F3522A073774E3010463247473C136C9DF0EE34D6BDBBEA759B08D5D870944DEBDAC4D98C0E472A5BD1264C39341CA3EE2B9B28F5E0701CABAF6CE25993C3711DFD65EB00EDE95DB0DBAD661BB83D3742E3AAE574EA5B4D0EC76DF49E4DC4C6F06E58ADF6D3446C4D0EC7B5FBD026B03D3B1CD9EA499BC0D6E468DCA2D9ECC12E160CC7373BCF26B43967A34E03230D5AE58E957CAD42B19DC907E7F9F2993E64B277F49539E69054DFB1B72FC936CA4433D3F65490DD984503D84AFECEEEB527D88A66AE155EAEBEF6D98FDE2A87CC25B5F4BA2C32CA9F69598A6CE7F5ADDAA458E27BE89C071AEBBA247C920A92895E30097F6721640F78E23079A57F8DA8965D134E1720D5BDF802589AE673AD9F054650F6819431FB17F3F654279BAD0CFDAE44468BB2E70F248B5624B338BC3D1979276E4E84EF43B81F0CD5E0D363FCA20EC8A78FC6EBE4D3E7541D884B1F87E4E4D1C740591CBACB577B70E863E1BA38F4FC0E1E86411F70D7F624C8C71AEF26C89DFA9E6CBD6DFF93CDCA48E17B50CDEE8C372241B798E491A8CFC2CBD6ACD73F409B3A38A7B1ACF06806B69B03793EDEF53FC5B5DAECD6767AB40E9E7EA2B5A845316FCE059E7B11F78D0536C5D849C5F633B15D72DC64E837616A0D0F59A4DA2082D6CDEE3E0F316B771C18698DFF1B61B44BBADC40E87F1F71885A3156AFB9E20B5145BCA151B5C4C89FD7A0083EAFE42C5374412285D3114899FF2097E7565DAACE21BEE2B76B95AE159A8C4D306BB111FACAF4C9CFD9E7B6CED3DB34FFE1ED1026A09A545708B7FCDD9AB2B8D6FBD291E93B20F45D2C7B117D964AF724CBA71AE946F08140A5FBEA14720F49CA104CDEF2903C40B76EDB7DD8F6D8F49C9265461259626CF6E3570CBF38797CF337D748959431270000, '5.0.0.net45')
